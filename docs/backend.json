{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a furniture product offered by Aravalli Home Studio.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product."
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the product."
        },
        "price": {
          "type": "number",
          "description": "Price of the product."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the product image.",
          "format": "uri"
        },
        "category": {
          "type": "string",
          "description": "Category of the product (e.g., chair, table)."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "price",
        "imageUrl",
        "category"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents a customer order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to Customer. (Relationship: Customer 1:N Order)"
        },
        "orderDate": {
          "type": "string",
          "description": "Date when the order was placed.",
          "format": "date-time"
        },
        "totalAmount": {
          "type": "number",
          "description": "Total amount of the order."
        },
        "status": {
          "type": "string",
          "description": "Status of the order (e.g., pending, processing, shipped, completed)."
        },
        "orderItems": {
          "type": "array",
          "description": "List of order items",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "customerId",
        "orderDate",
        "totalAmount",
        "status",
        "orderItems"
      ]
    },
    "OrderItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OrderItem",
      "type": "object",
      "description": "Represents an item within an order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order item."
        },
        "orderId": {
          "type": "string",
          "description": "Reference to Order. (Relationship: Order 1:N OrderItem)"
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Product 1:N OrderItem)"
        },
        "quantity": {
          "type": "number",
          "description": "Quantity of the product in the order item."
        },
        "unitPrice": {
          "type": "number",
          "description": "Price of one unit of the product at the time of the order."
        }
      },
      "required": [
        "id",
        "orderId",
        "productId",
        "quantity",
        "unitPrice"
      ]
    },
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer of Aravalli Home Studio.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the customer."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the customer."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the customer."
        },
        "email": {
          "type": "string",
          "description": "Email address of the customer.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the customer."
        },
        "address": {
          "type": "string",
          "description": "Address of the customer."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "phone",
        "address"
      ]
    },
    "GalleryItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GalleryItem",
      "type": "object",
      "description": "Represents an item in the gallery (image or video).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the gallery item."
        },
        "title": {
          "type": "string",
          "description": "Title of the gallery item."
        },
        "description": {
          "type": "string",
          "description": "Description of the gallery item."
        },
        "mediaUrl": {
          "type": "string",
          "description": "URL of the image or video.",
          "format": "uri"
        },
        "mediaType": {
          "type": "string",
          "description": "Type of media (e.g., image, video)."
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "mediaUrl",
        "mediaType"
      ]
    },
    "Greeting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Greeting",
      "type": "object",
      "description": "Represents a greeting message for visitors.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the greeting."
        },
        "message": {
          "type": "string",
          "description": "The greeting message to display."
        },
        "type": {
          "type": "string",
          "description": "Type of greeting (e.g., welcome, returning)."
        },
        "startDate": {
          "type": "string",
          "description": "Date and time when the greeting should start being displayed.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Date and time when the greeting should stop being displayed.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "message",
        "type",
        "startDate",
        "endDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information.  No denormalized authorization fields are needed as access is public.",
          "params": [
            {
              "name": "productId",
              "description": "The unique ID of the product."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "Customer",
          "schema": {
            "$ref": "#/backend/entities/Customer"
          },
          "description": "Stores customer profile information.  The userId is the Firebase Authentication UID.",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user, corresponding to their Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Stores order information for a specific user. Includes customerId to identify the owner (denormalized).",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user who placed the order."
            },
            {
              "name": "orderId",
              "description": "The unique ID of the order."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/orders/{orderId}/orderItems/{orderItemId}",
        "definition": {
          "entityName": "OrderItem",
          "schema": {
            "$ref": "#/backend/entities/OrderItem"
          },
          "description": "Stores individual items within an order. Includes orderId for association with the parent order (denormalized).",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user who placed the order."
            },
            {
              "name": "orderId",
              "description": "The unique ID of the order."
            },
            {
              "name": "orderItemId",
              "description": "The unique ID of the order item."
            }
          ]
        }
      },
      {
        "path": "/galleryItems/{galleryItemId}",
        "definition": {
          "entityName": "GalleryItem",
          "schema": {
            "$ref": "#/backend/entities/GalleryItem"
          },
          "description": "Stores gallery items (images, videos). No denormalized authorization fields are needed as access is public.",
          "params": [
            {
              "name": "galleryItemId",
              "description": "The unique ID of the gallery item."
            }
          ]
        }
      },
      {
        "path": "/greetings/{greetingId}",
        "definition": {
          "entityName": "Greeting",
          "schema": {
            "$ref": "#/backend/entities/Greeting"
          },
          "description": "Stores greeting messages for visitors.  No denormalized authorization fields are needed as configuration is managed by admins.",
          "params": [
            {
              "name": "greetingId",
              "description": "The unique ID of the greeting message."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support Aravalli Home Studio's application requirements, focusing on products, orders, customers, gallery items, and greetings. User data and associated content (orders) are structured under the `/users/{userId}` path for clear ownership and security. Products and GalleryItems are placed in root-level collections for easy listing and global access, while Greetings are in a root collection for global configuration. This design achieves authorization independence by avoiding hierarchical dependencies.  For example, order data is nested under the user document to reflect ownership. The structure supports QAPs by segregating data based on access requirements (e.g., user-specific data under `/users/{userId}`, and public product/gallery data at the root)."
  }
}

    